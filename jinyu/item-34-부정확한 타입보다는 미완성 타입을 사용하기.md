# 부정확한 타입보다는 미완성 타입을 사용하기

타입 선언을 작성하다 보면 코드의 동작을 더 구체적으로 또는 덜 구체적으로 모델링하게 되는 상황을 맞닥뜨리게 된다. 일반적으로 타입이 구체적일 수록 버그를 더 많이 잡고 타입스크립트가 제공하는 도구를 활용할 수 있게 된다. 하지만 타입 선언의 정밀도를 높이는 일에 주의를 기울여야 한다. 실수가 발생하기 쉽고 잘못된 타입은 차라리 타입이 없는 것보다 못할 수 있기 떄문이다.

다음 코드를 보자.

```ts
interface Point {
  type: "Point";
  coordinates: number[];
}
interface LineString {
  type: "LineString";
  coordinates: number[][];
}
interface Polygon {
  type: "Polygon";
  coordinates: number[][][];
}
type Geometry = Point | LineString | Polygon; // 다른 것들도 추가할 수 있습니다.
```

위의 타입 선언부를 보면 큰 문제는 없지만 좌표에 쓰이는 `number[]`가 약간 추상적이다. 여기서 경도와 위도를 나타내므로 튜플 타입으로 선언하는게 더 나아 보인다.

```ts
type GeoPosition = [number, number];
interface Point {
  type: "Point";
  coordinates: GeoPosition;
}
```

타입을 더 구체적으로 개선했기 때문에 더 나은 코드가 된 것 같지만 코드에는 위도와 경도만 명시했지 세 번쨰 요소인 고도가 있을 수 있고 다른 정보가 있을 수도 있다. 결과적으로 타입 선언을 세밀하게 만들고자 했지만 오히려 타입이 부정확해졌다.

너무 과하게 타입을 정밀하게 만들게 되면 코드가 더 부정확해질 수도 있다. 때문에 타입을 보다 정밀하게 만들고 싶다면 테스트 세트를 추가해 놓친 부분이 없는지 확인하는 과정을 해주면 좋다.

일반적으로 복잡한 코드는 더 많은 테스트가 필요하고 타입의 관점에서도 마찬가지이다.

타입을 정제할 때, '불쾌한 골짜기(uncanny valley) 은유를 생각해보면 도움이 될 수 있다. 일반적으로 `any` 같은 매우 추상적인 타입은 정제하는 것이 좋지만 타입이 구체적으로 정제된다고 해서 정확도가 무조건 올라가지 않는다. 타입에 의존하기 시작하면 부정확함으로 인해 발생하는 문제는 더 커질 것이다.
